# SmartSeating

SmartSeating 是一个基于 .NET 10 (WPF) 的智能排座桌面应用程序，专为需要灵活管理教室或考场座位的教师与管理员打造。通过图形化界面、导入导出工具以及内置的智能算法，用户可以快速完成从学生名单录入、布局调整到一键排座的全流程操作。

## 功能亮点
- **可视化座位编辑**：支持任意行列数的座位网格，提供拖拽框选、右键菜单、双击快速固定等直观交互。
- **学生信息管理**：从 Excel 名单导入、JSON 配置保存/恢复，并可在右侧面板维护身高、重要度、相邻偏好等数据。
- **智能排座**：基于模拟退火算法综合考虑禁座、固定座、身高/重要度、相邻偏好及区域偏好，自动搜索低成本方案。
- **统计面板**：新增布局概览与名单概览，实时显示总座位、已安排、空位、禁用座位以及当前筛选结果和未排座人数。
- **快速定位与放置**：左侧名单支持即时搜索、列表定位座位以及双击/按钮快速将选中学生放入当前座位。
- **多种导出方式**：一键导出 Excel 座位表、PNG 图像或 JSON 配置，方便分享与备份。

## 运行环境
- Windows 11/10
- .NET 10 SDK（预览）
- 建议使用 Visual Studio 2022 (17.10+) 或 `dotnet` CLI

> **提示**：在非 Windows 系统上无法运行/编译 WPF 应用。如需在 macOS/Linux 上查看代码，可使用编辑器打开，但构建与运行需在 Windows 环境完成。

## 快速开始
1. 克隆仓库：
   ```bash
   git clone https://github.com/<your-org>/SmartSeating.git
   ```
2. 使用 Visual Studio 打开 `SmartSeating.slnx`，或在命令行执行：
   ```bash
   dotnet restore SmartSeating/SmartSeating.csproj
   dotnet build SmartSeating/SmartSeating.csproj
   ```
3. 运行应用，首次启动会尝试加载默认配置 `SeatingConfig.json`（位于可执行文件同级目录）。

## 使用指南
- **调整座位**：顶部输入目标行列并点击“应用尺寸”，可通过拖拽选中多个座位进行批量操作。
- **名单筛选**：左侧搜索框实时过滤学生列表；下方统计会同步更新“当前显示”数量。
- **快速放置**：在座位画布中选中目标座位后，双击学生名单或点击“放入所选座位”即可完成指派。
- **智能排座**：点击“一键放置”可按照顺序填充空位；点击“智能排座”则启动模拟退火并显示进度条。
- **导入/导出**：支持 Excel 名单（首列姓名）、JSON 配置（含学生偏好和座位信息）以及 Excel/PNG 导出。

## 配置文件结构
JSON 配置包含：
```json
{
  "Rows": 10,
  "Cols": 10,
  "AllStudents": [ { "Name": "Alice", "HeightWeight": 100, ... } ],
  "Assignments": [ { "Row": 0, "Col": 1, "StudentName": "Alice", "IsFixed": true } ]
}
```
`AllStudents` 存储学生及其偏好，`Assignments` 记录每个座位的状态。导出配置后可直接拷贝给其他老师或用于备份。

## 常见问题
- **无法编译**：请确认已安装 .NET 10 SDK 以及 VS 2022 最新预览版，并在 Windows 环境下执行构建。
- **学生过多**：当学生数量超过可用座位时，状态栏会提示未放置人数，可增设座位或禁用多余学生。
- **偏好格式**：区域偏好使用 `行,列-行,列` 格式，例如 `1,1-3,8` 表示前 3 行 8 列范围。

欢迎提交 Issue 或 PR，一起让 SmartSeating 更好用！
